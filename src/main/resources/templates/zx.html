<!DOCTYPE html>

<html>
<head>
    <title>咨询</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no">

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.min.js"></script>
    <script src="https://cdn.bootcss.com/vue-resource/1.3.4/vue-resource.js"></script>
    <script src="https://cdn.bootcss.com/lodash.js/4.17.3/lodash.min.js"></script>
    <script type="text/javascript" src="/js/bar.js"></script>

    <style>
        .ui-upload {
            height: 80px;
            width: 80px;

            font-size: 14px;
            line-height: 30px;
            cursor: pointer;
            display: inline-block;
            text-align: center;
            color: #fff;
            border-radius: 3px;
            border: 0px;
            background-image: url(static/images/porf.gif);
            background-size: 100% 100%;
            float: left;
        }
    </style>

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #eee;
        }

        ul {
            list-style-type: none;
        }

        .topText {
            height: 45px;
            position: relative;
            top: 4px;
            font-size: 13px;
            padding-bottom: 3px;
        }

        .topText img {
            height: 22px;
            width: 22px;
        }

        .contentText {
            overflow: visible;
            letter-spacing: .2px;
            margin-top: 20px;
        }

        .commonPadding {
            padding-left: 17px;
            padding-right: 17px;
        }

        .bjh-p {
            display: block;
        }

        .mypW img {
            max-width: 100%;
            margin-top: 5px;
        }

        .allpic img {
            max-width: 87%;
            max-height: 65px;
        }
    </style>

    <link href="static/css/9002.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="">
<div id='data'>
    <table style='width: 100%;position: fixed;height:45px;top:0%;z-index:10001;border-collapse:collapse;' border="0"
           cellspacing="0" cellpadding="0">
        <tr style="background-color: #ffffff;">
            <td style='width:20%;text-align: center'>
                <div style='height: 45px;position: relative;top:14px;'>
                    <img v-show='ifshow' src='static/images/向左.png'
                         style='height:18px;width:18px;float:left;margin-left: 3%'
                         onclick="$('#news').show();a.ve.ifshow = false;setTimeout( ()=> { window.scrollTo(0,nowS);bool = true; replyPage = 0; });  ">

                </div>
            </td>

            <td style='width:15%;text-align: center'>
                <div class="ass  topText" onclick="a.ve.lis = [];nowtype = 0; page = 0;a.ve.ifshow = false;"
                     v-on:click='ALLSHOW = true' v-show='!ifshow'>
                    <img src='static/images/全部.png'>
                    <div class="myfont blue" style='position: relative;top:-2px;margin: 0 auto;text-align: center;'><p>
                        全部</p></div>
                </div>
            </td>
            <td style='width:15%;text-align: center'>
                <div class="ass  topText"
                     onclick="a.ve.lis = [];nowtype = 1; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false"
                     v-show='!ifshow'>
                    <img src='static/images/搜索_1.png'>
                    <div class="myfont" style='position: relative;top:-2px;margin: 0 auto;text-align: center;'><p>打听</p>
                    </div>
                </div>
            </td>
            <td style='width:15%;text-align: center' v-show='!ifshow'>
                <div class="ass  topText"
                     onclick="a.ve.lis = [];nowtype = 2; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false"
                     v-show='!ifshow'>
                    <img src='static/images/物品申请.png'>
                    <div class="myfont" style='position: relative;top:-2px;margin: 0 auto;text-align: center;'><p>寻物</p>
                    </div>
                </div>
            </td>
            <td style='width:15%;text-align: center;position: relative;left:-9%' v-if='ifshow'>
                <div class="ass  topText" onclick="a.ve.lis = [];nowtype = 2; page = 0;a.ve.ifshow = false;"
                     v-show='ifshow'>
                    <img style='border: 1px #fff none;border-radius: 17px;width: 34px;height: 34px'
                         v-bind:src='ppic(nowc.content)'>

                </div>
            </td>
            <td style='width:15%;text-align: center'>
                <div class="ass  topText"
                     onclick="a.ve.lis = [];nowtype = 3; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false"
                     v-show='!ifshow'>
                    <img src='static/images/福利_1.png'>
                    <div class="myfont" style='position: relative;top:-2px;margin: 0 auto;text-align: center;'><p>福利</p>
                    </div>
                </div>
            </td>
            <td style='width:20%;text-align: center'>
                <div style='height: 45px;position: relative;top:14px;width: 100%' v-on:click="dragshow = !dragshow"
                     v-show='!ifshow'>
                    <img src='static/images/Category.png'
                         style='height:18px;width:18px;float: right;margin-right: 5px;'>


                </div>


            </td>

        </tr>

        <tr>  <!--第二行了啊-->

            <td style='width:20%;text-align: center;'>
                <transition name="slide2">
                    <div v-show="dragshow" style=" background-color: rgb(255, 255, 255); height: 100%">

                    </div>
                </transition>
            </td>


            <td style='width:15%;text-align: center;background-color: rgba(0,0,0,0)'>
                <transition name="slide2">
                    <div v-show="dragshow" style="background-color: rgb(255, 255, 255);">
                        <div class="ass topText"
                             onclick="a.ve.lis = [];nowtype = 4; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false">
                            <img src='static/images/幼儿.png'>
                            <div class="myfont " style='position: relative;top:-2px;margin: 0 auto;text-align: center;'>
                                <p>求伴</p></div>
                        </div>
                    </div>
                </transition>
            </td>
            <td style='width:15%;text-align: center'>
                <transition name="slide2">
                    <div v-show="dragshow" style="background-color: rgb(255, 255, 255);">
                        <div class="ass  topText"
                             onclick="a.ve.lis = [];nowtype = 5; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false">
                            <img src='static/images/校园.png'>
                            <div class="myfont " style='position: relative;top:-2px;margin: 0 auto;text-align: center;'>
                                <p>校园</p></div>
                        </div>
                    </div>
                </transition>
            </td>
            <td style='width:15%;text-align: center'>
                <transition name="slide2">
                    <div v-show="dragshow" style="background-color: rgb(255, 255, 255);">
                        <div class="ass  topText"
                             onclick="a.ve.lis = [];nowtype = 6; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false">
                            <img src='static/images/消息_兼职.png'>
                            <div class="myfont " style='position: relative;top:-2px;margin: 0 auto;text-align: center;'>
                                <p>兼职</p></div>
                        </div>
                    </div>
                </transition>
            </td>
            <td style='width:15%;text-align: center'>
                <transition name="slide2">
                    <div v-show="dragshow" style="background-color: rgb(255, 255, 255);">
                        <div class="ass  topText"
                             onclick="a.ve.lis = [];nowtype = 7; page = 0;a.ve.ifshow = false;a.ve.ALLSHOW=false">
                            <img src='static/images/微商城.png'>
                            <div class="myfont " style='position: relative;top:-2px;margin: 0 auto;text-align: center;'>
                                <p>微商</p></div>
                        </div>
                    </div>
                </transition>
            </td>
            <td style='width:20%;text-align: center'>
                <transition name="slide2">
                    <div v-show="dragshow" style=" background-color: rgb(255, 255, 255); height: 100%">

                    </div>
                </transition>
            </td>


        </tr>


    </table>


    <ul class='allpic' style="margin-top: 67.5vw;margin-bottom: 15vw" v-show='!ifshow'>
        <div id="mutext" v-if="lis[0] === undefined"
             style="width:100%;margin: 0 auto;font-size: 10px;text-align: center"></div>
        <!-- <li style='width:100%;height:200px;background-color: #000;background-image: url(http://wx4.sinaimg.cn/large/006Zdy2vgy1fn5cu7897wj31hb0n111y.jpg); background-size: auto 100%'></li> -->


        <transition-group style="" name="fade">
            <li style="width: 100%;background-color: #ffffff;padding-top: 5px;padding-bottom: 2px" href="#sf"
                v-for='(li,index) in lis' v-bind:key="index" v-bind:nowcontent="li"
                onclick="$('#news').hide();window.scrollTo(0,0);window.history.pushState(json,'','#af');"
                v-on:click="another(li,{page:0,newsId:li.nid},'public/newsReply/get-by-page')">
                <ul style="width: 94%;margin-left: 3%;margin-right: 3%;border-bottom: 1px solid rgba(186, 186, 186,0.2)"
                    v-if="piccontent(li.content) == 3">
                    <li style="width:100%;overflow: hidden">
                        <div style="font-size:14px;line-height: 20px;font-weight: 100;text-overflow: ellipsis;overflow: hidden;display: -webkit-box;-webkit-line-clamp: 2;    -webkit-box-orient: vertical;margin-top: -3px;    margin-bottom: 4px;    text-align: left;">
                            <div style='display:inline;border-radius: 5px;padding-right: 3px;padding-left: 3px; margin-right: 3px;position: relative;top:-1px;border: 1px solid rgb(255, 44, 0);font-size: 12px;color: rgb(251, 47, 13);'
                                 v-if='li.isTop == 1'>置顶
                            </div>
                            {{li[showDataW[2]]}}
                        </div>
                    </li>
                    <li style="width:100%;">
                        <div style="width: 32.105%;height: 22%;display: inline-block"><img
                                v-bind:src="ppic(li.content,0)" style="width:100%;height: 100%;" alt="tu"/></div>
                        <div style="width: 32.105%;height: 22%;display: inline-block"><img
                                v-bind:src="ppic(li.content,1)" style="width:100%;height: 100%;" alt="tu"/></div>
                        <div style="width: 32.105%;height: 22%;display: inline-block"><img
                                v-bind:src="ppic(li.content,2)" style="width:100%;height: 100%;" alt="tu"/></div>

                    </li>
                    <li style="width:100%;padding-bottom: 5px;"><span
                            style="font-size:11px;margin-right: 5px;color:#bababa;">{{myDate(li.releaseTime)}}</span>
                        <div v-show='ALLSHOW'
                             style='display:inline;border-radius: 5px;padding-right: 3px;padding-left: 3px; border: 1px solid rgb(157, 157, 157);font-size: 11px;font-size: 13px;color: rgb(132, 132, 132);'>
                            {{classification(li.classification)}}
                        </div>
                    </li>
                </ul>
                <ul style="width: 94%;margin-left: 3%;margin-right: 3%;border-bottom: 1px solid rgba(186, 186, 186,0.2)"
                    v-else-if="piccontent(li.content) == 1">  <!-- 单图片内容 -->

                    <li style="width:100%;">
                        <div style="width: 32.105%;height: 22%;display: inline-block"><img v-bind:src="ppic(li.content)"
                                                                                           style="width:100%;height: 100%;"
                                                                                           alt="tu"/></div>
                        <div style="display: inline-block;width: 60%;position: absolute;margin-left: 1%;margin-top: 4px">
                            <div style="font-size:14px;line-height: 20px;font-weight: 100;text-overflow: ellipsis;overflow: hidden;display: -webkit-box;-webkit-line-clamp: 2;    -webkit-box-orient: vertical;margin-top: -3px;        text-align: left;">
                                <div style='display:inline;border-radius: 5px;padding-right: 3px;padding-left: 3px; position: relative;top:-1px;border: 1px solid rgb(255, 44, 0);font-size: 12px;color: rgb(251, 47, 13);'
                                     v-if='li.isTop == 1'>置顶
                                </div>
                                {{li[showDataW[2]]}}
                            </div>
                            <div><span style="font-size:11px;margin-right: 5px;color:#bababa;margin-top: 3px">{{myDate(li.releaseTime)}}</span>
                                <div v-show='ALLSHOW'
                                     style='display:inline;border-radius: 5px;padding-right: 3px;padding-left: 3px;border: 1px solid rgb(157, 157, 157);font-size: 11px;    color: rgb(132, 132, 132);'>
                                    {{classification(li.classification)}}
                                </div>
                            </div>
                        </div>
                    </li>

                </ul>
                <ul style="width: 94%;margin-left: 3%;margin-right: 3%;border-bottom: 1px solid rgba(186, 186, 186,0.2)"
                    v-else>
                    <li style="width:100%;overflow: hidden">
                        <div style="font-size:14px;line-height: 20px;font-weight:100;text-overflow: ellipsis;overflow: hidden;display: -webkit-box;-webkit-line-clamp: 2;    -webkit-box-orient: vertical;margin-top: -3px;    margin-bottom: 4px;    text-align: left;">
                            <div style='display:inline;border-radius: 5px;padding-right: 3px;padding-left: 3px; position: relative;top:-1px;border: 1px solid rgb(255, 44, 0);font-size: 12px;color: rgb(251, 47, 13);margin-right: 3px;'
                                 v-if='li.isTop == 1'>置顶
                            </div>
                            {{li[showDataW[2]]}}
                        </div>
                    </li>
                    <li style="width:100%;">
                        <!-- <div style="width: 32.105%;height: 22%;display: inline-block"><img v-bind:src="ppic(li.content,0)" style="width:100%;height: 100%;" alt="tu" /></div>
                         <div style="width: 32.105%;height: 22%;display: inline-block"><img v-bind:src="ppic(li.content,1)" style="width:100%;height: 100%;" alt="tu" /></div>
                         <div style="width: 32.105%;height: 22%;display: inline-block"><img v-bind:src="ppic(li.content,2)" style="width:100%;height: 100%;" alt="tu" /></div> -->

                    </li>
                    <li style="width:100%;padding-bottom: 5px;"><span
                            style="font-size:11px;margin-right: 5px;color:#bababa;">{{myDate(li.releaseTime)}}</span>
                        <div v-show='ALLSHOW'
                             style='display:inline;border-radius: 5px;padding-right: 3px;padding-left: 3px;border: 1px solid rgb(157, 157, 157);font-size: 11px;color: rgb(132, 132, 132);'>
                            {{classification(li.classification)}}
                        </div>
                    </li>
                </ul>


            </li>
        </transition-group>

        <!-- <li id="bottomWarning" style="position: relative;width: 100%;height: 50px;margin-top: 10px;text-align: center;overflow: hidden"></li> 暂时先取消下 -->
        <!-- <li class='tli'  style="width: 410px;background-color: #ffffff;position: fixed;bottom:0%;hieght:60px;overflow: hidden;min-height:35px;" onclick = ' '>


             <input class='mypost'  onclick='$(this).parent().animate({top:"0%"});$(this).hide() ;$(this).parent().find(".postcontent").show();$(".postpng").hide()  '  class='postinput' style='width: 380px;border: #ffffff  solid 1px;float: left;height: 20px' placeholder='你有什么想法？说出来吧' /><img class='postpng' style='float: right;width: 28px;height: 22px' src='询问.png' alt='提交' />

             <div class='postcontent' style='display:none;text-align: center;font-family: Microsoft JhengHei;font-size: 14px;font-weight: 700; '> <img onclick='  $(".tli").css("top","");$(".mypost").show() ;$(".postcontent").hide();$(".postpng").show()    '  src='关闭3.png' alt='关闭' style='float:left;width: 22px;height: 22px' /> 编辑帖子 <img  style='float: right;width: 22px;height: 22px' src='myicon/发布.png' alt='提交' /><br/>
                 <br/><input placeholder="写上你的标题吧" v-model="qo" style="width: 380px;border: #ffffff  solid 1px;float: left;height: 30px" ><br/>
                 <input  placeholder="这是帖子的内容哦" v-model="qt"  style="width: 380px;border: #ffffff  solid 1px;float: left;height: 120px"><br/><br/>
                 <button class="ui-upload" onclick="document.getElementById('upload').click()"><img src="myicon/上传.png" style=";width: 28px;height: 28px"/></button>
<input type="file" id="upload" style="display:none;" />

             </div>
             </li> -->
    </ul>

    <ul style="margin-top: 55px;margin-bottom: 15vw;margin-top: 50px;position: relative;z-index:10001" v-show='ifshow'>

        <li style="width: 100%;background-color: #ffffff;margin-top: 10px;padding-bottom: 20px;">
            <ul style="width: 94%;margin-left: 3%;margin-right: 3%">
                <li style="width:100%;overflow: hidden;text-align: left;margin-bottom: 10px;padding-top: 10px">
                    <div style="word-wrap:break-word;font-size:18px;font-weight: 700;line-height: 26px;text-overflow: ellipsis;overflow: hidden;display: -webkit-box;-webkit-line-clamp: 2;    -webkit-box-orient: vertical;margin-top: -3px;    margin-bottom: 4px;    text-align: left;">
                        {{nowc.title}}
                    </div>
                </li>

                <li style="width:100%;margin-bottom: 5px"><span style="color:#bababa;font-size: 12px">{{myDate(nowc.releaseTime)}}</span>
                </li>
                <li class="mypW" style="width:100%;    word-wrap: break-word;" v-html="nowc.content">

                </li>


            </ul>

        </li>

        <li style="width: 100%;height: 30px;margin-top: 10px;min-height:25px;background-color: #fff;padding-top: 4px">
            评论:
        </li>
        <li v-if="conts[0] === undefined"
            style="width:100%;margin: 0 auto;font-size: 12px;text-align: center;background-color: #fff;padding-bottom: 20px">
            偷偷告诉你这里什么都没有..
        </li>
        <!-- <p style="font-size: 13px;text-align: center;margin-top: 3px;"> 全部回复:</p> -->

        <transition-group name="fade">
            <li style="width: 100%;background-color: #ffffff;" v-for='(li,index) in conts' v-bind:key="index">
                <ul style="width: 94%;margin-left: 3%;margin-right: 3%">
                    <li style="width:100%;height: 60px;"><img
                            style="border-radius: 25px;border: none;height: 40px;width: 40px;float: left;margin-top:5px"
                            v-bind:src="'http://pic.zdnfbbs.cn/'+li.head_pic" alt="头">
                        <div style="width:120px;height:50px;display: inline-block;"><p
                                style="margin-top:6px;margin-left: 10px;font-size:12px">{{li.nick_name}}</p>
                            <p style="margin-top:7px;font-size:12px;margin-left: 10px;color:#bababa">{{
                                index+2+'楼'}}</p></div>
                    </li>

                    <li style="width:100%;min-height: 50px;font-size: 14px;text-indent:  2em;white-space:normal;word-break:break-all;word-wrap:break-word;">
                        {{li.content}}
                    </li>
                    <li style="width:100%;height: 20px"><span
                            style="font-size:12px;float: right;margin-right: 5px;color:#bababa">{{myDate(li.release_time)}}</span>
                    </li>
                </ul>

            </li>
        </transition-group>

        <li style="width: 100%;height: 30px;margin-top: 10px;min-height:35px;"></li>
        <!--  <li v-if='ifshow' style="width: 410px;background-color: #ffffff;position: fixed;bottom:0%;hieght:60px;overflow: hidden">
              <input v-model="replycont" style='width: 380px;border: #ffffff  solid 1px;float: left;height: 20px' placeholder='你有什么想法？说出来吧' /><img v-on:click="Reply('private/newsReply/add')" style='float: right;width: 28px;height: 22px' src='static/images/询问.png' alt='提交' />
          </li> -->
        <li class="liuyan" v-if='ifshow'
            style="width: 100%;position: fixed;bottom:0%;hieght:60px;overflow: hidden;margin-bottom: 15vw;z-index: 10001">
            <div class='myreply'
                 onclick="$('.liuyan').animate({top:'0%'});$('.myreply').hide() ;$('.rcontent').show();$('.liuyan').css('background-color','#ffffff')  "
                 style='width: 100%;float: left;height: 50px;'>
                <div style="width: 70px;height:38px;font-size: 12px;color:#ffffff;border: #ffffff 1px none;border-radius: 10px;float:right;background-color: rgba(255,102,51,0.8);text-align: center;line-height: 38px;position: fixed;right:5%"
                     class="postspan">回复
                </div>
            </div>


            <div class="rcontent" style="display: none;height: 36px;width: 100%;">
                <img onclick=" $('.liuyan').css('top','');$('.myreply').fadeIn(300) ;$('.rcontent').hide();$('.liuyan').css('background-color','');   "
                     src='static/images/关闭3.png' alt='关闭' style='float:left;width: 22px;height: 22px'/>
                <span class="rpng" v-on:click="Reply('private/newsReply/add')" style='float: right;margin-right: 20px;'>提交</span>
                <br/><br/><br/>
                <textarea v-model="replycont"
                          style='margin-left: 3%;width: 85%;height:300px;border:1px #fff solid;float: left;text-indent: 2px; padding-left: 2px;padding-top: 2px;'
                          placeholder='要不留个言再走~'></textarea>

            </div>
        </li>


    </ul>


    <transition name='t' mode="out-in">
        <div style="position: fixed;top:40%;width:100%;max-width: 410px;" v-if="warning">
            <div class="warning"
                 style="margin:0 auto;background-color:rgba(255,102,51,0.8);text-align: center;width:100px;color:#fff;border:  #cccccc 1px none;border-radius: 10px;">
                asd
            </div>
        </div>
    </transition>

    <div class="myLoading"
         style="position: fixed;height: 100%;width: 100%;background-color: #fff;top:0%;text-align: center">
        <img src="static/images/loading.gif" style="margin-top: 35%" alt="加载">
    </div>


</div>
<script type="text/javascript" src="http://cdn.nanfeng.hejianpeng.cn/js/pic_ad.js"></script>
<script>
    let nowS = '', bool = true, nowtype = 0, page, replyPage = 0, mypnewsId, ifnull = false, checkFull = true,
        saveP = null;
    var json = {time: 1};
    window.addEventListener("popstate", function (e) {
        $('#news').show();
        a.ve.ifshow = false;
        setTimeout(() => {
            window.scrollTo(0, nowS);
            bool = true;
            replyPage = 0;
        });
    }, false);
    $(document).ready(function () {
        page = 0;

        a.getTop('public/news/get-by-page', {page, type: nowtype, isTop: 1});
        $('.ass').on('click', () => {
            a.getTop('public/news/get-by-page', {page, type: nowtype, isTop: 1});
            ifnull = false;
        });


        $(window).scroll(_.debounce(function () {
                //   $('.liuyan').css('top','');$('.myreply').fadeIn(300) ;$('.rcontent').hide();$('.liuyan').css('background-color','');
                a.ve.dragshow = false;


                let scrollTop = parseInt($(this).scrollTop());

                let scrollHeight = $(document).height();
                let windowHeight = $(this).height();
                if (bool) {
                    nowS = parseInt($(this).scrollTop());
                    console.log(nowS);
                    console.log(windowHeight);
                    console.log(windowHeight + ' ' + scrollTop + ' ' + scrollHeight);
                    console.log(123);
                    if ((scrollTop + windowHeight == scrollHeight || scrollTop + windowHeight == scrollHeight - 2 || scrollTop + windowHeight == scrollHeight + 1 || scrollTop + windowHeight == scrollHeight - 1) && !ifnull) {
                        console.log("已经到最底部了！");
//这里写实例的新增楼层的方法 和留言

                        page++;
                        a.addLIS('public/news/get-by-page', {page, type: nowtype, isTop: 0});


                    }


                } else {
                    //console.log(windowHeight + ' ' + scrollTop + ' ' + scrollHeight + '????????');
                 //   console.log(111)
//这里写实例的新增楼层的方法 和留言


                    replyPage++;
                    a.addCONTS('public/newsReply/get-by-page', {page: replyPage, newsId: mypnewsId});

                 //   console.log(111)
                }


            }, 300)
        );
        setTimeout(() => {
            $('.myLoading').hide();
        }, 1000);
    });


    class F {


        constructor(redata = [], ansy, setId, head) {
            this.ve = new Vue({
                el: '#data',
                data: {
                    ALLSHOW: true,
                    lis: [],
                    conts: [],
                    nowc: {},
                    postdata: '',
                    postdatasave: '??',
                    ifshow: false,
                    qo: '',
                    qt: '',
                    replyId: '',
                    tempId: '',//点击了的帖子的id
                    replycont: '',
                    showDataW: redata,  //一共5个位置
                    ansytype: ansy,
                    myid: setId,
                    dragshow: false,//全部框
                    warning: false

                },
                methods: {
                    classification(type){
                        switch (type) {
                            case 0:
                                return '全部';
                            case 1:
                                return '打听';
                            case 2:
                                return '寻物';
                            case 3:
                                return '福利';
                            case 4:
                                return '求伴';
                            case 5:
                                return '校园';
                            case 6:
                                return '兼职';
                            case 7:
                                return '微商';
                            default:
                                return ' ';
                        }
                    },
                    ppic(li, p = 0){
                        try {
                            let end = li.match(/src\s*=\s*(\"|\').+?(\"|\')/g)[p];

                            return end.replace(/src/, ' ').trim().replace(/^=/, ' ').trim().replace(/^(\"|\')/g, '').replace(/(\"|\')$/, '');//这个叫我真的不会正则
                        } catch (e) {
                            return 'static/images/mapico4.png';
                        }

                    },
                    piccontent(li){
                        if (li.match(/src\s*=\s*(\"|\').+?(\"|\')/g) === null) {
                            return 0;
                        }
                        if (li.match(/src\s*=\s*(\"|\').+?(\"|\')/g).length > 2) {
                            return 3;
                        } else if (li.match(/src\s*=\s*(\"|\').+?(\"|\')/g).length >= 1) {
                            return 1;
                        } else {
                            return 0;
                        }
                        ;
                    },
                    myDate(ydate){

                        var date = new Date(ydate);


                        if (ydate !== '刚刚') {
                            var y = date.getFullYear();
                            var m = date.getMonth() + 1;
                            m = m < 10 ? ('0' + m) : m;
                            var d = date.getDate();
                            d = d < 10 ? ('0' + d) : d;
                            var h = date.getHours();
                            h = h < 10 ? ('0' + h) : h;
                            var minute = date.getMinutes();
                            minute = minute < 10 ? ('0' + minute) : minute;
                            var second = date.getSeconds();
                            second = second < 10 ? ('0' + second) : second;
                            return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;
                        } else {
                            return '刚刚';
                        }

                    },
                    post(url, p = {}, func = undefined){
                        //差板块id  和

                        p = this.postdatasave;
                        p.uid = this.myid;
                        p.title = this.qo;
                        p.content = this.qt.replace(/script/g, ' ');
                        console.log(head);
                        p[this.ansytype] = nowtype;

                        Vue.http.get(allurl + url, {params: p}).then((response) => {
                            if (response.bodyText === 'success') {
                                console.log('发布成功');
                                $(".tli").css("top", "");
                                $(".mypost").show();
                                $(".postcontent").hide();
                                $(".postpng").show();
                                p.replyNum = '0';
                                p.releaseTime = '刚刚';
                                this.lis.push(p);//['uid','releaseTime','title','content','replyNum']
                            }
                            if (func) {
                                func();
                            }
                            ;
                        });
                    },
                    Reply(url, p = {}, func = undefined){
                        //需要  postId uid content
                        p.uid = this.myid;
                        p.nid = this.tempId;
                        p.content = this.replycont.replace(/script/g, ' ');
                        console.log(p);//这是发布的也包括留言  一切发送的东西
                        delete p.uid;
                        Vue.http.post(allurl + url, p, {emulateJSON: true}).then((response) => {
                            if (response.bodyText === 'success') {
                                console.log('发布成功');
                                $(".tli").css("top", "");
                                $(".mypost").show();
                                $(".postcontent").hide();
                                $(".postpng").show();
                                $('.liuyan').css('top', '');
                                $('.myreply').fadeIn(300);
                                $('.rcontent').hide();
                                $('.liuyan').css('background-color', '');
                                //this.conts.push(p);
                                //  this.contents = [];
                                this.another(saveP.A, saveP.B, saveP.C);
                            }
                            if (func) {
                                func();
                            }
                            ;
                        }, (error) => {
                            self.location.href = "/sign_in";
                        });
                    },
                    another(li, p = {}/*回复的实体*/, url = undefined){

                        saveP = {A: li, B: p, C: url};
                        checkFull = true;
                        this.conts = [];
                        this.nowc = li;
                        this.tempId = li.nid;
                        console.log('??');
                        mypnewsId = p.nid;

                        a.changeNOWC(url, p);
                    }
                }
            });
        }


        getTop(url, p = {}) {
            /* if(p.type == null){
             delete p.type;
             }

             if(p.plate == null){
             delete p.plate;
             } */
            for (let c in p) {
                if (p.c == null) {
                    delete p.c;
                }
            }
            var that = this;
            Vue.http.get(allurl + url, {params: p}).then((response) => {
                let f = eval("(" + response.bodyText + ")");
                f.forEach((data) => {
                        a.ve.lis.push(data);
                    }
                );
                /*if(that.ve.lis[0] === undefined){
                 udf = true;
                 $('#mutext').html('偷偷告诉你这里什么都没有...');
                 }*/
                p.isTop = 0;
                this.addLIS(url, p);
            });

        }

        addLIS(url, p = {}) {
            $('#bottomWarning').css('height', '50px');
            $('#bottomWarning').html("<img  alt='加载' src = 'static/images/loading.gif'/>");
            var that = this;
            Vue.http.get(allurl + url, {params: p}).then((response) => {
                let fs = eval("(" + response.bodyText + ")");
                setTimeout(() => {
                    fs.forEach((data) => {
                        a.ve.lis.push(data);
                    });
                }, 100);
                if (fs) {
                    // $('#mutext').html('偷偷告诉你这里什么都没有...');
                    // alert('内容都没有啦');
                    ifnull = true;
                    setTimeout(() => {
                        $('#bottomWarning').html("<p  style='color:red;font-size:12px;'>已经到底啦~</p>");


                    }, 500);
                    setTimeout(() => {
                        $('#bottomWarning').animate({height: '0px'});
                    }, 2000);
                }
            });
        }

        addCONTS(url, p) {
            console.log(p)
            if (checkFull) {
                Vue.http.get(allurl + url, {params: p}).then((response) => {
                    var f = eval("(" + response.bodyText + ")");

                    if (!f[0]) {
                        checkFull = false;
                    }
                    f.forEach((data) => {
                        this.ve.conts.push(data);
                    });

                });
            }


        }

        changeNOWC(url, p = {}) {


            setTimeout(() => {
                bool = false;
                this.ve.ifshow = true;
                //  p = {page:0,postId:this.ve.nowc.pid};
                this.addCONTS(url, p);
            }, 200);

        }

    }

    let a = new F(['AO', 'releaseTime', 'title', 'content', 'nothing'], 'nid');


    a.ve.postdatasave = {nid: null, title: null, content: null, nid: null};


    //  写一个实体吧
    //{ uid title content replyNum isTop plateId }  {  postId uid content  isDelete  }

    $('.myfont').click(function () {

        $('.myfont').removeClass('blue');
        $(this).addClass('blue');
    });


    var allurl = '';
    //http://nanfengdev.s3.natapp.cc/
</script>

</body>
</html>
